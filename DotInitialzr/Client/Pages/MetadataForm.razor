<VMContext VM="MetadataForm" TState="IMetadataFormState" OnStateChange="UpdateState">
    <d-form>
        <d-panel>
            <d-text-field id="ProjectName" />
            @if (state?.TextFields != null)
            {
                @foreach (var id in state.TextFields)
                {
                    <d-text-field id="@id" />
                }
            }
            @if (state?.Checkboxes != null)
            {
                @foreach (var id in state.Checkboxes)
                {
                    <d-checkbox id="@id" />
                }
            }
        </d-panel>
    </d-form>
</VMContext>

@code {
   private IMetadataFormState state;

   private void UpdateState(IMetadataFormState state)
   {
       this.state = state;
       StateHasChanged();
   }
}
